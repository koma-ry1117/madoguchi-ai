# 画面一覧

## 概要

madoguchi-aiの画面構成。キオスクモデルにより、顧客向け画面は最小限（キオスク1画面のみ）。

**合計: 26ページ**

| カテゴリ | 画面数 |
|----------|--------|
| 共通 | 3 |
| キオスク（顧客向け） | 1 |
| オペレーター管理画面 | 12 |
| システム管理者画面 | 10 |

---

## 共通画面（3ページ）

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 1 | `/` | ランディングページ | サービス紹介ページ |
| 2 | `/login` | ログイン | オペレーター・管理者ログイン |
| 3 | `/error` | エラーページ | 404/500エラー |

---

## キオスク画面（顧客向け）（1ページ）

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 4 | `/kiosk/[operatorId]` | キオスク | 店舗設置用AI接客画面 |

### キオスク画面の構成

```
┌─────────────────────────────────────────────────────────────────┐
│                    キオスク画面                                  │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ フェーズ: Welcome                                           ││
│  │ - AIアバター挨拶                                            ││
│  │ - 「話しかけてください」プロンプト                          ││
│  └─────────────────────────────────────────────────────────────┘│
│                          ↓                                       │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ フェーズ: Conversation                                      ││
│  │ - AIアバター（感情表現）                                    ││
│  │ - メッセージリスト + 物件カード                             ││
│  │ - 音声/テキスト入力                                         ││
│  └─────────────────────────────────────────────────────────────┘│
│                          ↓                                       │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ フェーズ: Contact                                           ││
│  │ - 連絡先入力フォーム（名前、電話、メール）                  ││
│  └─────────────────────────────────────────────────────────────┘│
│                          ↓                                       │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ フェーズ: Complete                                          ││
│  │ - 「ありがとうございました」                                ││
│  │ - 予約サマリー                                              ││
│  │ - 30秒後自動リセット                                        ││
│  └─────────────────────────────────────────────────────────────┘│
│                          or                                      │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ フェーズ: Goodbye                                           ││
│  │ - 「またのご来店をお待ちしています」                        ││
│  │ - 自動リセット                                              ││
│  └─────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────┘
```

**重要**: 顧客はログイン不要。会話だけで物件検索〜内見予約まで完結。

---

## オペレーター管理画面（12ページ）

オペレーター（不動産会社）がログインして利用する管理画面。

### ダッシュボード

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 5 | `/dashboard` | ダッシュボード | 統計サマリー、直近の予約・会話 |

### 物件管理

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 6 | `/properties` | 物件一覧 | 自社物件の一覧、検索、フィルター |
| 7 | `/properties/[id]` | 物件詳細 | 物件情報の閲覧・編集 |
| 8 | `/properties/create` | 物件登録 | 新規物件の手動登録 |

### 顧客管理

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 9 | `/customers` | 顧客一覧 | キオスクで収集した顧客一覧 |
| 10 | `/customers/[id]` | 顧客詳細 | 顧客情報、会話・予約履歴 |

### 内見予約管理

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 11 | `/viewings` | 内見予約一覧 | 予約一覧、ステータス管理 |
| 12 | `/viewings/[id]` | 内見予約詳細 | 予約詳細、会話履歴、ステータス更新 |

### 会話履歴

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 13 | `/conversations` | 会話一覧 | キオスクでの会話履歴一覧 |
| 14 | `/conversations/[id]` | 会話詳細 | 会話の全文、感情分析結果 |

### マーケティング

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 15 | `/marketing/campaigns` | キャンペーン一覧 | メールキャンペーン管理 |
| 16 | `/marketing/campaigns/[id]` | キャンペーン詳細 | 配信状況、開封率 |

---

## システム管理者画面（10ページ）

システム管理者（gyam様）がオペレーターを管理する画面。

### ダッシュボード

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 17 | `/admin/dashboard` | 管理者ダッシュボード | システム全体統計 |

### オペレーター管理

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 18 | `/admin/operators` | オペレーター一覧 | 全オペレーター一覧 |
| 19 | `/admin/operators/[id]` | オペレーター詳細 | オペレーター情報・統計 |
| 20 | `/admin/operators/create` | オペレーター登録 | 新規オペレーター登録 |

### サブスクリプション管理

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 21 | `/admin/subscriptions` | サブスクリプション一覧 | 契約状況一覧 |
| 22 | `/admin/subscriptions/[id]` | サブスクリプション詳細 | 契約詳細・更新 |

### システム統計

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 23 | `/admin/stats` | 統計ダッシュボード | 詳細な統計・グラフ |
| 24 | `/admin/stats/operators` | オペレーター別統計 | オペレーター比較 |

### 監査・ログ

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 25 | `/admin/logs` | 監査ログ | 重要操作のログ一覧 |

### 設定

| No | パス | 画面名 | 説明 |
|----|------|--------|------|
| 26 | `/admin/settings` | システム設定 | 全体設定 |

---

## 画面遷移図

### キオスク（顧客向け）

```
[Welcome] → [Conversation] → [Contact] → [Complete] → [Welcome]
                ↓
            [Goodbye] → [Welcome]
```

### オペレーター

```
[ログイン] → [ダッシュボード]
                ↓
    ┌───────────┼───────────┬───────────┬───────────┐
    ↓           ↓           ↓           ↓           ↓
[物件管理]  [顧客管理]  [予約管理]  [会話履歴]  [マーケティング]
```

### システム管理者

```
[ログイン] → [管理者ダッシュボード]
                    ↓
    ┌───────────────┼───────────────┬───────────────┐
    ↓               ↓               ↓               ↓
[オペレーター管理] [サブスクリプション] [統計]     [監査ログ]
```

---

## ルーティング構成

```
app/
├── page.tsx                          # / (ランディング)
├── login/page.tsx                    # /login
├── error.tsx                         # /error
├── kiosk/
│   └── [operatorId]/
│       ├── page.tsx                  # /kiosk/[operatorId]
│       └── layout.tsx                # キオスク用レイアウト
├── (operator)/                       # オペレーター認証必須グループ
│   ├── layout.tsx                    # オペレーターレイアウト
│   ├── dashboard/page.tsx            # /dashboard
│   ├── properties/
│   │   ├── page.tsx                  # /properties
│   │   ├── [id]/page.tsx             # /properties/[id]
│   │   └── create/page.tsx           # /properties/create
│   ├── customers/
│   │   ├── page.tsx                  # /customers
│   │   └── [id]/page.tsx             # /customers/[id]
│   ├── viewings/
│   │   ├── page.tsx                  # /viewings
│   │   └── [id]/page.tsx             # /viewings/[id]
│   ├── conversations/
│   │   ├── page.tsx                  # /conversations
│   │   └── [id]/page.tsx             # /conversations/[id]
│   └── marketing/
│       └── campaigns/
│           ├── page.tsx              # /marketing/campaigns
│           └── [id]/page.tsx         # /marketing/campaigns/[id]
└── (admin)/                          # 管理者認証必須グループ
    ├── layout.tsx                    # 管理者レイアウト
    ├── dashboard/page.tsx            # /admin/dashboard
    ├── operators/
    │   ├── page.tsx                  # /admin/operators
    │   ├── [id]/page.tsx             # /admin/operators/[id]
    │   └── create/page.tsx           # /admin/operators/create
    ├── subscriptions/
    │   ├── page.tsx                  # /admin/subscriptions
    │   └── [id]/page.tsx             # /admin/subscriptions/[id]
    ├── stats/
    │   ├── page.tsx                  # /admin/stats
    │   └── operators/page.tsx        # /admin/stats/operators
    ├── logs/page.tsx                 # /admin/logs
    └── settings/page.tsx             # /admin/settings
```

---

## 認証要件

| カテゴリ | 認証 | 権限 |
|----------|------|------|
| 共通 | 不要 | - |
| キオスク | 不要 | - |
| オペレーター | 必要 | role = 'operator' |
| 管理者 | 必要 | role = 'admin' |
