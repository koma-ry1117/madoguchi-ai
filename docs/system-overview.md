# システム概要

## システム名

**不動産窓口営業アシスタント「madoguchi-ai」**

- **略称**: madoguchi-ai
- **英語表記**: madoguchi-ai - Real Estate Front Desk Sales Assistant

## 開発背景

### 依頼者
**giyamさん**（医療理科学ガラス問屋の方で、不動産事業も展開）

### 開発目的
不動産店舗での顧客対応を自動化するAIエージェントシステムの開発

### 業界課題
- 個人経営の不動産会社が多い
- 人手不足による顧客対応の限界
- 高齢者向けの分かりやすい接客の必要性
- 複数の物件情報源の統合管理の困難さ

## キャラクター設定

### 基本プロフィール
- **名前**: （未定）（営業担当）
- **役割**: お客様の希望を聞いて、最適な物件を紹介する不動産営業担当

### 特徴
- ✅ 丁寧で親しみやすい接客
- ✅ 高齢者にも分かりやすい説明
- ✅ 何度でも質問に答えてくれる
- ✅ 忍耐強く条件をヒアリング
- ✅ 顧客のペースに合わせた対応

### アバターイメージ
- 信頼感のある営業パーソン
- 親しみやすい表情
- 年齢層は30-40代くらい（落ち着きと親しみのバランス）

## 接客フロー

### 基本的な会話フロー

```
1. 【来店挨拶】
   AI: 「いらっしゃいませ」

2. 【ニーズ確認】
   AI: 「本日はどのような物件をお探しでしょうか?」

3. 【ヒアリング・条件確認】
   - 賃貸 or 売買
   - 物件タイプ（マンション、一戸建て、アパート）
   - エリア（文京区、千代田区など）
   - 予算（家賃・売買価格）
   - 間取り（1K、1LDK、2LDKなど）
   - 環境・向き・広さなどの詳細条件

4. 【物件提案・説明】
   AI: 「ご希望に合いそうな物件をいくつかご紹介しますね」
   - 条件に合った物件を複数提示
   - 各物件の特徴を分かりやすく説明
   - 画像・間取り図を表示

5. 【フィードバック収集】
   AI: 「気になる物件はございましたか?」
   - 顧客の反応を確認
   - 条件の再調整
   - 追加質問への対応

6. 【絞り込み・詳細案内】
   - 候補物件を2-3件に絞り込み
   - 内見予約の案内
   - 担当者への引き継ぎ
```

### 対応パターン

#### パターン1: 条件が明確な顧客
```
顧客: 「文京区で2LDK、家賃15万円以内の物件を探しています」
AI: 「承知しました。文京区で2LDK、家賃15万円以内ですね。
         他にご希望の条件はございますか？
         （駅からの距離、築年数、設備など）」
```

#### パターン2: 条件が曖昧な顧客
```
顧客: 「いい物件ないかな...」
AI: 「かしこまりました。まずはいくつか確認させてください。
         賃貸物件をお探しでしょうか？それとも購入をお考えですか？」
```

#### パターン3: 高齢者への対応
```
顧客: 「スマホの使い方がよく分からなくて...」
AI: 「大丈夫ですよ。ゆっくりとお話しください。
         音声でお話しいただければ、私が物件をお探しします」
```

## 主な機能要件

### 1. 不動産データベース統合
- 自社データベースとの連携
- 外部サイト（アットホーム等）からのデータ収集
- 特定地域（文京区、千代田区など）に限定
- 3〜6時間おきの自動更新

### 2. 顧客対応システム
- 賃貸・売買の分類と条件検索
- 物件タイプ（マンション、一戸建て、アパート）の分類
- 環境、向き、広さなどの詳細条件での絞り込み
- 顧客データの蓄積と学習
- 会話履歴の保存
- 顧客の好みパターンの学習

### 3. インターフェース
- **音声入力機能**
  - マイクボタンで録音開始
  - リアルタイム音声認識
  - テキスト確認と手動修正も可能

- **アバターによる対応**
  - 静止画画像ベース（5種類の表情）
  - 感情に応じた表情切り替え
  - Framer Motionによる滑らかなアニメーション

- **自然な音声合成**
  - ElevenLabsによる高品質音声
  - よくある応答の音声キャッシング
  - ストリーミング再生対応

### 4. 物件取り込み機能
- Chrome拡張機能によるワンクリック取り込み
- GPT-4oによる構造化データ抽出
- HTMLスナップショット保存（法的証跡）
- 取り込みログの記録

### 5. メール通知機能 ⭐ NEW
- **内見予約確定メール**
  - 顧客への内見日時確認メール
  - オペレーターへの内見予約通知
  - カレンダー招待（.icsファイル）添付

- **システムお知らせメール**
  - 新着物件のお知らせ
  - メンテナンス通知
  - 重要なシステム変更の連絡

- **問い合わせ確認メール**
  - 問い合わせ受付完了の自動返信
  - 担当者アサイン通知

- **その他の通知メール**
  - パスワードリセット（Supabase Auth）
  - アカウント登録確認
  - 定期的な物件提案（オプション）

- **メールテンプレート**
  - React Emailによる美しいHTMLメール
  - レスポンシブデザイン対応
  - ブランドカラー統一

## ビジネスモデル

### 提供形態

#### 1. 自社利用
- giyamさんの不動産店舗での運用
- 顧客対応の自動化・効率化

#### 2. サブスクリプション提供
- 他の不動産会社へのSaaS提供
- 月額料金制
- 顧客数・物件数に応じた従量課金

### ターゲット市場
- 個人経営の不動産会社
- 小規模〜中規模の不動産仲介業者
- 人手不足に悩む不動産店舗

### 競合優位性
- AI音声対応による24時間営業
- 高齢者にも優しいインターフェース
- 複数の物件情報源の統合管理
- 導入コストの低さ（SaaS型）

## アバター表情パターン

### 5種類の静止画表情

| 表情ファイル名 | 使用シーン | 感情 |
|-------------|----------|------|
| neutral.png | 通常の受け答え | 通常 |
| happy.png | 良い物件を見つけた時、顧客が喜んだ時 | 喜び |
| thinking.png | 物件を検索中、条件を考えている時 | 考え中 |
| apologetic.png | 条件に合う物件が見つからない時 | 謝罪 |
| excited.png | おすすめ物件を紹介する時 | 興奮 |

### 感情判定ロジック
GPT-4oが会話内容から感情を分析し、適切な表情を選択

```typescript
// 感情判定の例
interface EmotionAnalysis {
  emotion: 'neutral' | 'happy' | 'thinking' | 'apologetic' | 'excited';
  confidence: number; // 0-1の信頼度
  reason: string; // 判定理由
}
```

## ユーザーロール

### 階層構造
```
Admin（gyam様）
  └─ Operator（不動産会社A）
       └─ Customer（入居者1, 入居者2, ...）
  └─ Operator（不動産会社B）
       └─ Customer（入居者3, 入居者4, ...）
```

### 1. 管理者（Admin）- gyam様
**役割**: システム全体の管理者

**権限**:
- オペレーター（不動産会社）の登録・管理
- オペレーター企業情報の編集・削除
- 全オペレーターの契約状態管理
- 全オペレーターの物件データ閲覧
- 全オペレーターの顧客データ閲覧（監査用）
- システム全体の設定管理
- アクセスログ・監査ログ確認
- システム全体のダッシュボード・分析
- 課金・サブスクリプション管理

### 2. オペレーター（Operator）- 不動産会社
**役割**: gyam様と契約した不動産会社のユーザー

**権限**:
- 物件の取り込み（Chrome拡張）
- 自社が取り込んだ物件の編集・削除
- 自社の顧客（入居者）の管理
- 自社の顧客対応履歴の確認
- 自社の問い合わせへの対応
- 自社の内見予約管理
- 自社の物件・顧客のダッシュボード表示
- 自社の顧客向けメール送信

**制限**:
- 他社の物件・顧客データは閲覧不可
- システム設定の変更不可
- 他のオペレーターの情報は閲覧不可

### 3. 顧客（Customer/Resident）- 入居者
**役割**: 不動産会社と契約している（または物件を探している）エンドユーザー

**権限**:
- 物件検索・閲覧（自分が所属する不動産会社の物件のみ）
- AIとの会話
- 問い合わせ送信
- 内見予約申し込み
- 会話履歴の閲覧（自分のみ）
- 自分のプロフィール編集

**制限**:
- 他の顧客の情報は閲覧不可
- 物件の編集・削除不可
- 管理機能へのアクセス不可

## 想定利用シナリオ

### シナリオ1: 店舗来店時
1. タブレット端末でmadoguchi-aiを起動
2. 音声で条件をヒアリング
3. その場で物件提案
4. 気に入った物件があれば担当者につなぐ

### シナリオ2: Webサイトでの利用
1. 不動産会社のWebサイトにアクセス
2. チャットボットとして表示
3. 自宅から音声・テキストで物件探し
4. 問い合わせフォーム送信

### シナリオ3: 営業時間外
1. 22時以降でもWebサイトで対応
2. 翌営業日に担当者が確認
3. メールで返信

## 成功指標（KPI）

### 顧客満足度
- 会話完了率（途中離脱しない）
- 物件提案の的中率
- 内見予約率

### 業務効率化
- 1次対応の自動化率
- オペレーター対応時間の削減
- 問い合わせ対応件数の増加

### ビジネス成果
- 成約率の向上
- 顧客単価の向上
- SaaS契約社数（外部提供時）

---

次のドキュメント: [技術スタック詳細](./technical-stack.md)
